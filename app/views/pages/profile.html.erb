
<div class="main-container mb-5">
  <h1>Hello <%= current_user.username %></h1>
  <%= image_tag profile_picture(current_user), crop: :fill, class: 'avatar-large' %>

  <% if @progress_trackers.empty? %>
    <%= "You don't have any point yet, "%><%= link_to "give it a go!" , exercices_path %>
  <% end %>

  <% @progress_trackers.each do |pt| %>
    <div class="container my-5">

      <div class="row justify-content">
        <div class="col-sm">
          <h5> sum up for <%= pt.exercice.name %> </h5>
        </div>
      </div>

      <div class="row">
        <% ['today', 'week', 'all of time'].each do |sort_of_time| %>
          <div class="col-sm">
            <h6><%= sort_of_time %>:</h6>
          </div>
        <% end %>
      </div>

      <div class="row">
        <% [1, 7, 10_000].each_with_index do |nb_days| %>
        <% percent = pt.percentage_for_day(nb_days)  %>
          <div class="col-sm">
            <div class="progress mb-4 progressbar-container-profile">
              <div class="progress-bar bg-success progress-bar-striped progress-bar-animated" role="progressbar" style="width: <%= percent %>%" aria-valuemin="0" aria-valuemax="100"> <%= percent %>%</div>
              <div class="progress-bar bg-danger" role="progressbar" style="width: <%= 100 - percent %>%" aria-valuemin="0" aria-valuemax="100"><%= 100 - percent %>%</div>
            </div>
          </div>
        <% end %>
      </div>

    </div>

  <% end %>

  <%= link_to 'Edit your profile', edit_user_registration_path , class: 'cool-button' %>

  <div class="container ranking-container">
    <ul class='mt-5'>
      <% @users.each do |user| %>
        <li class='row my-3'>
          <%= user.username %>
          <p> <%= cl_image_tag profile_picture(user), crop: :fill, class: 'avatar' %> </p>
          <p>Successes: <%= user.trials.where(success: true).count %> </p>
        </li>
      <% end %>
    </ul>
  </div>

</div>
