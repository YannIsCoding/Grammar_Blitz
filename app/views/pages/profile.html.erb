
<div class="profile-container mb-5">
  <h1>Hello <%= current_user.username %></h1>
  <%= image_tag profile_picture(current_user), crop: :fill, class: 'avatar-large' %>

  <% if @exercices.empty? %>
    <%= "You don't have any point yet, "%><%= link_to "give it a go!" , exercices_path %>
  <% end %>
  <%= link_to 'Edit your profile', edit_user_registration_path , class: 'cool-button' %>

  <div class="container my-5">
    <div class="row">
      <div class="col-8">
        <% @exercices.each do |exer| %>
          <div class="container">

            <div class="row justify-content">
              <div class="col mt-2">
                <h5> sum up for <%= exer.name %> </h5>
              </div>
            </div>

            <div class="row">
              <% ['today', 'week', 'all of time'].each do |sort_of_time| %>
                <div class="col-sm">
                  <h6><%= sort_of_time %>:</h6>
                </div>
              <% end %>
            </div>

            <div class="row">
              <% [1, 7, 10_000].each_with_index do |nb_days| %>
              <% percent = percentage_for_day(current_user, exer, nb_days)  %>
                <div class="col-sm">
                  <div class="progress mb-4 progressbar-container-profile">
                    <div class="progress-bar bg-success progress-bar-striped progress-bar-animated" role="progressbar" style="width: <%= percent %>%" aria-valuemin="0" aria-valuemax="100"> <%= percent %>%</div>
                    <div class="progress-bar bg-danger" role="progressbar" style="width: <%= 100 - percent %>%" aria-valuemin="0" aria-valuemax="100"><%= 100 - percent %>%</div>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>

      <div class="col-4">
        <div class="container ranking-container mt-5 p-2">
          <div class='row my-3 no-gutters border-bottom font-weight-bold'>
            <div class="col-2 "> Rank </div>
            <div class="col-8"> Blitzer </div>
            <div class="col-2"> Points  </div>
          </div>
          <% @ranking.each_with_index do |rank_array, index| %>
            <% user = User.find(rank_array.first) %>
            <div class="row py-3 align-items-center no-gutters <%= active_user_class(user) %>">
              <div class="col-2 "> <%= index + 1 %> </div>
              <div class="col-3"> <%= image_tag profile_picture(user), crop: :fill, class: 'avatar' %> </div>
              <div class="col-5 text-left"> <%= user.username %> </div>
              <div class="col-2"> <%= rank_array.last%>  </div>
            </div>
          <% end %>
        </div>
      </div>

    </div>
  </div>

</div>
